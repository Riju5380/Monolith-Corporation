<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DigiSHOP | Login</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Specific Styles for Login Tabs */
        .login-container {
            width: 100%;
            max-width: 400px;
            margin: 10vh auto;
        }
        .login-tabs {
            display: flex;
            margin-bottom: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 50px;
            padding: 5px;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            border-radius: 40px;
            font-size: 0.9rem;
            color: #888;
            transition: 0.3s;
        }
        .tab.active {
            background: var(--text-main);
            color: var(--bg-color);
            font-weight: bold;
        }
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-muted); }
        .input-field {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            color: var(--text-main);
            outline: none;
        }
        .input-field:focus { border-color: var(--primary); }
    </style>
</head>
<body>

    <div class="gradient-bg">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>
    <div class="noise-overlay"></div>

    <div class="container login-container">
        <div class="glass-panel">
            <h2 style="text-align: center; margin-bottom: 1rem;">Welcome Back</h2>
            
            <div class="login-tabs">
                <div class="tab active" onclick="switchRole('customer')" id="tab-customer">Customer</div>
                <div class="tab" onclick="switchRole('shopkeeper')" id="tab-shopkeeper">Partner</div>
                <div class="tab" onclick="switchRole('admin')" id="tab-admin">Admin</div>
            </div>

            <form id="loginForm" onsubmit="event.preventDefault(); performLogin();">
                <div class="input-group">
                    <label>Email / Phone</label>
                    <input type="text" class="input-field" id="userEmail" required placeholder="Enter your ID">
                </div>

                <div class="input-group">
                    <label>Password</label>
                    <input type="password" class="input-field" id="userPass" required placeholder="••••••••">
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">Login</button>
            </form>
            
            <p style="text-align: center; margin-top: 15px; font-size: 0.8rem; color: #888;">
            New here? <a href="signup.html" style="color: var(--primary);">Create Account</a>
            </p>
            </p>
        </div>
    </div>

    <script>
    // 1. AUTO-SELECT ROLE BASED ON URL
    // This checks if you came from the "Customer" or "Shopkeeper" card
    const urlParams = new URLSearchParams(window.location.search);
    const preSelectedRole = urlParams.get('role') || 'customer'; // Default to customer

    let currentRole = preSelectedRole;

    // Run this when page loads to set the correct tab color
    window.onload = function() {
        switchRole(currentRole);
    }

    function switchRole(role) {
        currentRole = role;
        
        // Visual: Update the Tab Styles
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        const activeTab = document.getElementById('tab-' + role);
        if(activeTab) activeTab.classList.add('active');

        // Visual: Change the Theme Colors
        document.body.className = ''; // Reset
        if(role === 'shopkeeper') document.body.classList.add('shopkeeper-theme');
        if(role === 'admin') document.body.classList.add('admin-theme');
    }

    // 2. THE LOGIN BUTTON LOGIC
    function performLogin() {
        const email = document.getElementById('userEmail').value;
        const pass = document.getElementById('userPass').value;

        // Simple validation
        if(!email || !pass) {
            alert("Please enter your email and password.");
            return;
        }

        // REDIRECTION (The "Connection")
        // This is what actually moves the user to the next page
        if(currentRole === 'customer') {
            window.location.href = 'customer.html';
        } else if(currentRole === 'shopkeeper') {
            window.location.href = 'shopkeeper.html';
        } else if(currentRole === 'admin') {
            window.location.href = 'admin.html';
        }
    }
    </script>
</body>
</html>